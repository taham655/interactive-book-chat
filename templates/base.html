[Previous content remains the same until line 134]
                <li class="nav-item">
                    <a class="nav-link {% if request.endpoint == 'index' %}active{% endif %}" 
                       href="{{ url_for('index') }}#upload-section"
                       data-navlink
                       onclick="handleHomeClick(event)">
                        <i class="bi bi-house-door me-2"></i> Home
                    </a>
                </li>
[Rest of the previous content remains the same until before the closing script tag]
    <script>
        // Enable smooth scrolling
        document.documentElement.style.scrollBehavior = 'smooth';

        // Improved sidebar toggle functionality
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('show');
        }

        // Handle home button click
        function handleHomeClick(event) {
            const uploadSection = document.getElementById('upload-section');
            if (window.location.pathname === '/' && uploadSection) {
                event.preventDefault();
                uploadSection.scrollIntoView({ behavior: 'smooth' });
            }
        }

        // Handle navigation clicks
        document.addEventListener('click', function(event) {
            const sidebar = document.getElementById('sidebar');
            const target = event.target;
            
            // Check if click is on a navigation link
            if (target.closest('[data-navlink]')) {
                // On mobile, close sidebar after navigation
                if (window.innerWidth <= 768) {
                    sidebar.classList.remove('show');
                }
                return; // Allow normal navigation
            }
            
            // Close sidebar when clicking outside on mobile
            if (window.innerWidth <= 768 && 
                !sidebar.contains(target) && 
                !target.closest('.toggle-sidebar-btn')) {
                sidebar.classList.remove('show');
            }
        });

        // Handle window resize
        window.addEventListener('resize', function() {
            const sidebar = document.getElementById('sidebar');
            if (window.innerWidth > 768) {
                sidebar.classList.remove('show');
            }
        });

        // Handle direct hash navigation
        window.addEventListener('load', function() {
            if (window.location.hash === '#upload-section') {
                const uploadSection = document.getElementById('upload-section');
                if (uploadSection) {
                    uploadSection.scrollIntoView({ behavior: 'smooth' });
                }
            }
        });
    </script>
</body>
</html>
